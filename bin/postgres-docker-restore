#!/bin/bash

function usage() {
    echo "Usage: postgres-docker-restore container_name db_user dump_file"
    echo "  Note that dump_file is relative to docker filesystem and must be mounted"
}

if [[ ! "$#" == 3 ]]; then
    usage
    exit 1
fi
container_name="$1"
db_user="$2"
dump_file="$3"
if [ -z "$container_name" ] || [ -z "$db_user" ] || [ -z "$dump_file" ]; then
    usage
    exit 1
fi

docker exec -it "$container_name" '/bin/sh' -c "psql -U $db_user < $dump_file"
